# **Lua 运算符**

Lua 提供了多种运算符，包括算术运算符、关系运算符、逻辑运算符、位运算符和其他特殊运算符。  

---

## **1. 算术运算符**
Lua 支持基本的数学运算：
| 运算符 | 作用 | 示例 | 结果 |
|--------|------|------|------|
| `+`    | 加法 | `3 + 2` | `5` |
| `-`    | 减法 | `3 - 2` | `1` |
| `*`    | 乘法 | `3 * 2` | `6` |
| `/`    | 除法 | `7 / 2` | `3.5` |
| `//`   | 取整除 | `7 // 2` | `3` |
| `%`    | 取模 | `7 % 2` | `1` |
| `^`    | 指数（幂） | `2 ^ 3` | `8` |

**示例：**
```lua
print(10 + 5)   -- 输出: 15
print(10 // 3)  -- 输出: 3（整数除法）
print(2 ^ 4)    -- 输出: 16（2的4次方）
```

---

## **2. 关系运算符**
关系运算符用于比较两个值，返回 `true` 或 `false`：
| 运算符 | 作用 | 示例 | 结果 |
|--------|------|------|------|
| `==`   | 等于 | `5 == 5` | `true` |
| `~=`   | 不等于 | `5 ~= 3` | `true` |
| `>`    | 大于 | `5 > 3` | `true` |
| `<`    | 小于 | `3 < 5` | `true` |
| `>=`   | 大于等于 | `5 >= 5` | `true` |
| `<=`   | 小于等于 | `3 <= 5` | `true` |

**示例：**
```lua
print(10 == 10)   -- 输出: true
print(10 ~= 5)    -- 输出: true
print(5 > 3)      -- 输出: true
print(2 <= 1)     -- 输出: false
```

---

## **3. 逻辑运算符**
Lua 的逻辑运算符用于处理布尔值：
| 运算符 | 作用 | 示例 | 结果 |
|--------|------|------|------|
| `and`  | 逻辑与 | `true and false` | `false` |
| `or`   | 逻辑或 | `true or false` | `true` |
| `not`  | 逻辑非 | `not true` | `false` |

**示例：**
```lua
print(true and false)  -- 输出: false
print(true or false)   -- 输出: true
print(not true)        -- 输出: false
```

> **注意**：
> - `and` 返回 **第一个为 false 的值** 或 **最后一个值**。
> - `or` 返回 **第一个为 true 的值** 或 **最后一个值**。

```lua
print(0 and 10)  -- 输出: 10
print(nil and 10) -- 输出: nil
print(false or "Hello") -- 输出: Hello
```

---

## **4. 赋值运算符**
Lua 使用 `=` 进行赋值，也支持复合赋值运算：
| 运算符 | 作用 | 示例 | 结果 |
|--------|------|------|------|
| `=`    | 赋值 | `a = 10` | `a = 10` |
| `+=`   | 加法赋值 | `a += 5` | `a = a + 5` |
| `-=`   | 减法赋值 | `a -= 5` | `a = a - 5` |
| `*=`   | 乘法赋值 | `a *= 5` | `a = a * 5` |
| `/=`   | 除法赋值 | `a /= 5` | `a = a / 5` |
| `//=`  | 整除赋值 | `a //= 5` | `a = a // 5` |
| `%=`   | 取模赋值 | `a %= 5` | `a = a % 5` |
| `^=`   | 指数赋值 | `a ^= 5` | `a = a ^ 5` |

**示例：**
```lua
a = 10
a += 5  -- 相当于 a = a + 5
print(a)  -- 输出: 15
```

---

## **5. 字符串运算符**
Lua 只支持一种字符串运算符：**连接运算符 `..`**。
```lua
str1 = "Hello"
str2 = "World"
print(str1 .. " " .. str2)  -- 输出: Hello World
```
> **注意**：  
> `..` 只连接字符串，不能直接连接数字：
```lua
print("Value: " .. 10)  -- 输出: Value: 10
```
如果要连接变量，需要转换：
```lua
num = 123
print("Number: " .. tostring(num))  -- 输出: Number: 123
```

---

## **6. 位运算符（Lua 5.3+ 支持）**
Lua 5.3 及以上支持位运算符：
| 运算符 | 作用 | 示例 | 结果 |
|--------|------|------|------|
| `&`    | 按位与 | `5 & 3` | `1` |
| `|`    | 按位或 | `5 | 3` | `7` |
| `~`    | 按位异或 | `5 ~ 3` | `6` |
| `<<`   | 左移 | `5 << 1` | `10` |
| `>>`   | 右移 | `5 >> 1` | `2` |
| `~`    | 按位取反 | `~5` | `-6` |

**示例：**
```lua
print(5 & 3)   -- 输出: 1
print(5 | 3)   -- 输出: 7
print(5 ~ 3)   -- 输出: 6
print(5 << 1)  -- 输出: 10
print(5 >> 1)  -- 输出: 2
print(~5)      -- 输出: -6
```

---

## **7. 运算符优先级**
运算符的优先级从高到低：
1. `^`
2. `not - #`（一元操作符）
3. `* / // %`
4. `+ -`
5. `..`（字符串连接）
6. `< > <= >= == ~=`
7. `and`
8. `or`

**示例：**
```lua
print(2 + 3 * 4)  -- 输出: 14（先乘法）
print(not false and true)  -- 输出: true
print("Lua" .. 5 + 1)  -- 错误，`..` 连接优先于 `+`
```
**括号 `()` 可以改变优先级**：
```lua
print((2 + 3) * 4)  -- 输出: 20
```

---

## **8. 综述**
- **算术运算符**：`+ - * / // % ^`
- **关系运算符**：`== ~= > < >= <=`
- **逻辑运算符**：`and or not`
- **字符串拼接**：`..`
- **位运算符（5.3+）**：`& | ~ << >>`
- **运算符优先级** 需要注意 `not`、`..` 和 `and/or`。

